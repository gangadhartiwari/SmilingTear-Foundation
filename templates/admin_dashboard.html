<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

    <div class="container mx-auto px-6 py-10">

        <h1 class="text-3xl font-bold text-blue-700 mb-6">Admin Dashboard</h1>

        <!-- Logout -->
        <div class="flex justify-end mb-6">
            <a href="{{ url_for('logout') }}"
               class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
               Logout
            </a>
        </div>

        <!-- Volunteer Applications -->
        <div class="bg-white p-6 rounded-lg shadow-lg mb-10">
            <h2 class="text-2xl font-bold text-gray-700 mb-4">Volunteer Applications</h2>

            <table class="w-full border-collapse">
                <thead>
                    <tr class="bg-blue-600 text-white">
                        <th class="p-3">Name</th>
                        <th class="p-3">Email</th>
                        <th class="p-3">City</th>
                        <th class="p-3">Status</th>
                        <th class="p-3">Actions</th>
                    </tr>
                </thead>

                <tbody>
                    {% for v in volunteer_apps %}
                    <tr class="border-b hover:bg-gray-100">
                        <td class="p-3">{{ v.name }}</td>
                        <td class="p-3">{{ v.email }}</td>
                        <td class="p-3">{{ v.city }}</td>
                        <td class="p-3">
                            {% if v.status == 'approved' %}
                                <span class="px-3 py-1 bg-green-200 text-green-700 rounded">Approved</span>
                            {% else %}
                                <span class="px-3 py-1 bg-yellow-200 text-yellow-700 rounded">Pending</span>
                            {% endif %}
                        </td>

                        <td class="p-3 space-x-3">
                            {% if v.status != 'approved' %}
                            <a href="{{ url_for('approve_volunteer', vol_id=v.id) }}"
                               class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700">
                               Approve
                            </a>
                            {% endif %}

                            <a href="{{ url_for('delete_volunteer', vol_id=v.id) }}"
                               class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700">
                               Delete
                            </a>
                        </td>

                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        </div>

        <!-- Approved Volunteers (User Accounts) -->
        <div class="bg-white p-6 rounded-lg shadow-lg mb-10">
            <h2 class="text-2xl font-bold text-gray-700 mb-4">Volunteer Accounts</h2>

            <table class="w-full border-collapse">
                <thead>
                    <tr class="bg-green-600 text-white">
                        <th class="p-3">Name</th>
                        <th class="p-3">Email</th>
                        <th class="p-3">Role</th>
                        <th class="p-3">Actions</th>
                    </tr>
                </thead>

                <tbody>
                    {% for u in users if u.role == 'volunteer' %}
                    <tr class="border-b hover:bg-gray-100">
                        <td class="p-3">{{ u.username }}</td>
                        <td class="p-3">{{ u.email }}</td>
                        <td class="p-3 capitalize">{{ u.role }}</td>

                        <td class="p-3">
                            <a href="{{ url_for('delete_user', email=u.email) }}"
                               class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700">
                               Delete
                            </a>
                        </td>

                    </tr>
                    {% endfor %}
                </tbody>

            </table>
        </div>

        <!-- Manager Accounts -->
        <div class="bg-white p-6 rounded-lg shadow-lg mb-10">
            <h2 class="text-2xl font-bold text-gray-700 mb-4">Manager Accounts</h2>

            <table class="w-full border-collapse">
                <thead>
                    <tr class="bg-purple-600 text-white">
                        <th class="p-3">Name</th>
                        <th class="p-3">Email</th>
                        <th class="p-3">Role</th>
                        <th class="p-3">Actions</th>
                    </tr>
                </thead>

                <tbody>
                    {% for m in users if m.role == 'manager' %}
                    <tr class="border-b hover:bg-gray-100">
                        <td class="p-3">{{ m.username }}</td>
                        <td class="p-3">{{ m.email }}</td>
                        <td class="p-3 capitalize">{{ m.role }}</td>

                        <td class="p-3">
                            <a href="{{ url_for('delete_user', email=m.email) }}"
                               class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700">
                               Delete
                            </a>
                        </td>

                    </tr>
                    {% endfor %}
                </tbody>

            </table>
        </div>

        <!-- Add Manager -->
        <div class="bg-white p-6 rounded-lg shadow-lg mb-10">
            <h2 class="text-2xl font-bold text-purple-700 mb-4">Add New Manager</h2>

            <form action="{{ url_for('add_manager') }}" method="POST" class="space-y-4 max-w-lg">

                <input type="text" name="username" placeholder="Manager Name"
                       class="w-full border p-3 rounded" required>

                <input type="email" name="email" placeholder="Manager Email"
                       class="w-full border p-3 rounded" required>

                <input type="password" name="password" placeholder="Password"
                       class="w-full border p-3 rounded" required>

                <button class="bg-purple-600 text-white px-6 py-2 rounded hover:bg-purple-700">
                    Add Manager
                </button>

            </form>
        </div>

    </div>
    <!-- Donation Records -->
<div class="bg-white p-6 rounded-lg shadow-lg mb-10">
    <h2 class="text-2xl font-bold text-gray-700 mb-4">Donation Records</h2>

    <table class="w-full border-collapse">
        <thead>
            <tr class="bg-orange-600 text-white">
                <th class="p-3">#</th>
                <th class="p-3">Donation ID</th>
                <th class="p-3">Transaction ID</th>
                <th class="p-3">Amount</th>
                <th class="p-3">Program</th>
                <th class="p-3">Donor Name</th>
                <th class="p-3">Email</th>
                <th class="p-3">Phone</th>
                <th class="p-3">Anonymous</th>
                <th class="p-3">Date</th>
                <th class="p-3">Status</th>
            </tr>
        </thead>

        <tbody>
            {% for d in donations %}
            <tr class="border-b hover:bg-gray-100">
                <td class="p-3">{{ d.id }}</td>
                <td class="p-3">{{ d.donation_id }}</td>
                <td class="p-3">{{ d.transaction_id }}</td>
                <td class="p-3 font-semibold text-green-700">â‚¹{{ "%.2f"|format(d.amount) }}</td>
                <td class="p-3">{{ d.program }}</td>
                <td class="p-3">{{ d.donor_name }}</td>
                <td class="p-3">{{ d.donor_email }}</td>
                <td class="p-3">{{ d.donor_phone }}</td>
                <td class="p-3">
                    {% if d.is_anonymous %}
                        <span class="px-3 py-1 bg-yellow-200 text-yellow-700 rounded">Yes</span>
                    {% else %}
                        <span class="px-3 py-1 bg-green-200 text-green-700 rounded">No</span>
                    {% endif %}
                </td>
                <td class="p-3">{{ d.timestamp }}</td>
                <td class="p-3">
                    {% if d.status == 'success' %}
                        <span class="px-3 py-1 bg-green-200 text-green-700 rounded">Success</span>
                    {% else %}
                        <span class="px-3 py-1 bg-red-200 text-red-700 rounded">Failed</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>


</body>
</html>
